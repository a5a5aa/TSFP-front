import{Q as g}from"./QIcon.5ca772cc.js";import{Q as b}from"./QInput.2b55d701.js";import{Q as v}from"./QBtn.0ecae08c.js";import{Q}from"./QForm.eb749f44.js";import{Q as x}from"./QPage.9f43aec5.js";import{v as C}from"./index.203ecb31.js";import{r as l,a0 as q,m as y,y as B,t as i,av as V,C as o,d as a,z as f,an as k,ao as h}from"./index.4d875d08.js";import{u as T}from"./use-quasar.4f5cff6d.js";import"./focus-manager.db5612a5.js";import"./Ripple.cf9a4ce0.js";import"./use-router-link.2f5a64da.js";import"./vm.594ed3a6.js";const N={class:"reset_password text-center q-pa-xl bg-white rounded-borders shadow-5"},P=o("h5",null,"\u91CD\u8A2D\u5BC6\u78BC",-1),z=o("p",{class:"q-ma-md"},[f("\u8ACB\u8F38\u5165\u60A8\u7684\u96FB\u5B50\u4FE1\u7BB1"),o("br"),f("\u6211\u5011\u6703\u767C\u9001\u91CD\u8A2D\u5BC6\u78BC\u9023\u7D50\u7D66\u60A8\uFF01")],-1),A={class:"btn row flex-center"},K={__name:"ResetPassword",setup(I){const _=V(),n=l(!1),m=l(!1),c=T(),u=l(0),r=q({name:"",nickname:"",email:"",phone:"",password:"",passwordConfirm:""}),d={name(e){return e.length>=2&&e.length<=5||"\u9577\u5EA6\u5FC5\u9808\u70BA 2 ~ 5 \u500B\u5B57"},email(e){return C.isEmail(e)||"\u4FE1\u7BB1\u683C\u5F0F\u932F\u8AA4"},required(e){return!!e||"\u6B04\u4F4D\u5FC5\u586B"},length(e){return e.length>=4&&e.length<=20||"\u9577\u5EA6\u5FC5\u9808\u70BA 4 ~ 20 \u500B\u5B57"}},w=async()=>{if(!!n.value){m.value=!0;try{console.log(r),await k.post("/users",r),await p(),await setTimeout(()=>{h.fire({width:"18rem",icon:"success",title:"\u5BC6\u78BC\u91CD\u8A2D\u4FE1\u4EF6\u5DF2\u767C\u9001",text:"\u8ACB\u81F3\u4FE1\u7BB1\u9EDE\u64CA\u9A57\u8B49\u4FE1\u4EF6\u91CD\u8A2D\u5BC6\u78BC",iconColor:"#C5A768",confirmButtonColor:"#2b2b2b"}),_.push("/")},2e3)}catch(e){p(),setTimeout(()=>{var t,s;h.fire({width:"18rem",icon:"error",text:((s=(t=e==null?void 0:e.response)==null?void 0:t.data)==null?void 0:s.message)||"\u767C\u751F\u932F\u8AA4",iconColor:"#C5A768",confirmButtonColor:"#2b2b2b"})},2e3)}m.value=!1}},p=()=>{c.loading.show(),u.value=setTimeout(()=>{c.loading.hide(),u.value=0},2e3)};return(e,t)=>(y(),B(x,{class:"row flex-center"},{default:i(()=>[o("div",N,[P,z,a(Q,{ref_key:"valid",ref:n,onSubmit:w,class:"q-gutter-md q-mt-md"},{default:i(()=>[a(b,{modelValue:r.email,"onUpdate:modelValue":t[0]||(t[0]=s=>r.email=s),label:"\u96FB\u5B50\u4FE1\u7BB1 *","lazy-rules":"",rules:[d.email,d.required]},{prepend:i(()=>[a(g,{name:"fa-regular fa-envelope"})]),_:1},8,["modelValue","rules"]),o("div",A,[a(v,{class:"submit col-6",label:"\u767C\u9001\u91CD\u8A2D\u9023\u7D50",type:"submit",color:"primary",to:"/login"})])]),_:1},512)])]),_:1}))}};export{K as default};
