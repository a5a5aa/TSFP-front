import{Q as V}from"./QIcon.5ca772cc.js";import{Q as t}from"./QInput.2b55d701.js";import{Q as m}from"./QBtn.0ecae08c.js";import{a as k,Q as g}from"./QCard.c6fa8f42.js";import{Q as w}from"./QCardActions.f9670441.js";import{Q}from"./QForm.eb749f44.js";import{Q as y}from"./QDialog.70ecafb3.js";import{Q as q}from"./QPage.9f43aec5.js";import{u as C,a0 as x,az as U,ao as v,m as B,y as S,t as s,v as r,C as d,d as o,z as i,aw as I}from"./index.4d875d08.js";import"./focus-manager.db5612a5.js";import"./Ripple.cf9a4ce0.js";import"./use-router-link.2f5a64da.js";import"./vm.594ed3a6.js";import"./use-prevent-scroll.867bf119.js";import"./use-timeout.d612f645.js";const z={class:"q-mb-lg col-12"},A={style:{"max-width":"600px"},class:"bg-white q-pa-xl shadow-2 row justify-between"},N=d("h5",{align:"center"},"\u8CC7\u6599\u4FEE\u6539",-1),R={__name:"BasicInfo",setup(j){const u=C(),{editInfo:p}=u,l=x({name:"",nickname:"",phone:"",email:"",loading:!1,dialog:!1}),b=async()=>{l.loading=!0,await p(l),l.loading=!1};return(async()=>{var n;try{const{data:e}=await U.get("/users/me");l.name=e.result.name,l.nickname=e.result.nickname,l.phone=e.result.phone,l.email=e.result.email}catch(e){v.fire({width:"18rem",icon:"error",text:((n=e==null?void 0:e.response)==null?void 0:n.data.message)||"\u767C\u751F\u932F\u8AA4",iconColor:"#C5A768",confirmButtonColor:"#2b2b2b",allowOutsideClick:!1})}})(),(n,e)=>{const c=r("q-card-title"),f=r("q-spacer");return B(),S(q,null,{default:s(()=>[d("div",null,[d("h5",z,[o(V,{name:"fa-solid fa-address-book",size:"1.5rem",class:"q-mr-sm"}),i("\u57FA\u672C\u8CC7\u6599")]),d("div",A,[o(t,{class:"q-mb-md col-5",disable:"","stack-label":"",modelValue:l.name,"onUpdate:modelValue":e[0]||(e[0]=a=>l.name=a),label:"\u59D3\u540D",dense:n.dense},null,8,["modelValue","dense"]),o(t,{class:"q-mb-md col-5",disable:"","stack-label":"",modelValue:l.nickname,"onUpdate:modelValue":e[1]||(e[1]=a=>l.nickname=a),label:"\u66B1\u7A31",dense:n.dense},null,8,["modelValue","dense"]),o(t,{class:"q-mb-md col-5",disable:"","stack-label":"",modelValue:l.email,"onUpdate:modelValue":e[2]||(e[2]=a=>l.email=a),label:"\u96FB\u5B50\u4FE1\u7BB1",dense:n.dense},null,8,["modelValue","dense"]),o(t,{class:"q-mb-md col-5",disable:"","stack-label":"",modelValue:l.phone,"onUpdate:modelValue":e[3]||(e[3]=a=>l.phone=a),label:"\u806F\u7D61\u96FB\u8A71",dense:n.dense},null,8,["modelValue","dense"]),o(m,{class:"text-center self-end q-mt-lg",color:"primary",icon:"edit",label:"\u4FEE\u6539",onClick:e[4]||(e[4]=a=>l.dialog=!0)})])]),o(y,{class:"q-pa-md q-gutter-sm row","no-shake":"",persistent:"",modelValue:l.dialog,"onUpdate:modelValue":e[10]||(e[10]=a=>l.dialog=a)},{default:s(()=>[o(k,{class:"row q-pa-xl"},{default:s(()=>[o(Q,{style:{width:"700px"},onSubmit:I(b,["prevent"])},{default:s(()=>[o(c,{class:"col-12"},{default:s(()=>[N]),_:1}),o(g,{class:"col-12 row justify-between text-primary"},{default:s(()=>[o(t,{"stack-label":"",class:"col-5",modelValue:l.name,"onUpdate:modelValue":e[5]||(e[5]=a=>l.name=a),label:"\u59D3\u540D",type:"text"},null,8,["modelValue"]),o(t,{"stack-label":"",class:"col-5",modelValue:l.nickname,"onUpdate:modelValue":e[6]||(e[6]=a=>l.nickname=a),label:"\u66B1\u7A31",type:"text"},null,8,["modelValue"]),o(t,{"stack-label":"",class:"col-5",modelValue:l.email,"onUpdate:modelValue":e[7]||(e[7]=a=>l.email=a),label:"\u96FB\u5B50\u4FE1\u7BB1",type:"text"},null,8,["modelValue"]),o(t,{"stack-label":"",class:"col-5",modelValue:l.phone,"onUpdate:modelValue":e[8]||(e[8]=a=>l.phone=a),label:"\u806F\u7D61\u96FB\u8A71",type:"text"},null,8,["modelValue"])]),_:1}),o(w,{class:"q-mt-md"},{default:s(()=>[o(f),o(m,{disabled:l.loading,color:"grey",onClick:e[9]||(e[9]=a=>l.dialog=!1)},{default:s(()=>[i("\u53D6\u6D88")]),_:1},8,["disabled"]),o(m,{disabled:l.loading,color:"warning",type:"submit"},{default:s(()=>[i("\u5132\u5B58")]),_:1},8,["disabled"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"])]),_:1})}}};export{R as default};
